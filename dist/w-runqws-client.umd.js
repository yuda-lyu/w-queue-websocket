/*!
 * w-runqws-client v1.0.16
 * (c) 2018-2019 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("wolfy87-eventemitter"),require("w-websocket-client/src/WWebsocketClient.mjs"),require("crypto-js/enc-base64"),require("crypto-js/lib-typedarrays")):"function"==typeof define&&define.amd?define(["wolfy87-eventemitter","w-websocket-client/src/WWebsocketClient.mjs","crypto-js/enc-base64","crypto-js/lib-typedarrays"],r):(t=t||self)["w-runqws-client"]=r(t.EventEmitter$1,t.WSC,t.encbase64,t.libwa)}(this,(function(t,r,e,n){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t,r=r&&r.hasOwnProperty("default")?r.default:r,e=e&&e.hasOwnProperty("default")?e.default:e,n=n&&n.hasOwnProperty("default")?n.default:n;var o=function(){this.__data__=[],this.size=0};var u=function(t,r){return t===r||t!=t&&r!=r};var i=function(t,r){for(var e=t.length;e--;)if(u(t[e][0],r))return e;return-1},a=Array.prototype.splice;var c=function(t){var r=this.__data__,e=i(r,t);return!(e<0)&&(e==r.length-1?r.pop():a.call(r,e,1),--this.size,!0)};var f=function(t){var r=this.__data__,e=i(r,t);return e<0?void 0:r[e][1]};var s=function(t){return i(this.__data__,t)>-1};var l=function(t,r){var e=this.__data__,n=i(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this};function v(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}v.prototype.clear=o,v.prototype.delete=c,v.prototype.get=f,v.prototype.has=s,v.prototype.set=l;var p=v;var y=function(){this.__data__=new p,this.size=0};var b=function(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e};var d=function(t){return this.__data__.get(t)};var h=function(t){return this.__data__.has(t)};function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var j="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function _(t,r){return t(r={exports:{}},r.exports),r.exports}var m="object"==g(j)&&j&&j.Object===Object&&j,w="object"==("undefined"==typeof self?"undefined":g(self))&&self&&self.Object===Object&&self,O=m||w||Function("return this")(),A=O.Symbol,x=Object.prototype,S=x.hasOwnProperty,U=x.toString,k=A?A.toStringTag:void 0;var B=function(t){var r=S.call(t,k),e=t[k];try{t[k]=void 0;var n=!0}catch(t){}var o=U.call(t);return n&&(r?t[k]=e:delete t[k]),o},M=Object.prototype.toString;var P=function(t){return M.call(t)},I="[object Null]",E="[object Undefined]",T=A?A.toStringTag:void 0;var z=function(t){return null==t?void 0===t?E:I:T&&T in Object(t)?B(t):P(t)};var D=function(t){var r=g(t);return null!=t&&("object"==r||"function"==r)},Q="[object AsyncFunction]",N="[object Function]",F="[object GeneratorFunction]",L="[object Proxy]";var $,W=function(t){if(!D(t))return!1;var r=z(t);return r==N||r==F||r==Q||r==L},C=O["__core-js_shared__"],R=($=/[^.]+$/.exec(C&&C.keys&&C.keys.IE_PROTO||""))?"Symbol(src)_1."+$:"";var q=function(t){return!!R&&R in t},V=Function.prototype.toString;var G=function(t){if(null!=t){try{return V.call(t)}catch(t){}try{return t+""}catch(t){}}return""},J=/^\[object .+?Constructor\]$/,H=Function.prototype,K=Object.prototype,X=H.toString,Y=K.hasOwnProperty,Z=RegExp("^"+X.call(Y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var tt=function(t){return!(!D(t)||q(t))&&(W(t)?Z:J).test(G(t))};var rt=function(t,r){return null==t?void 0:t[r]};var et=function(t,r){var e=rt(t,r);return tt(e)?e:void 0},nt=et(O,"Map"),ot=et(Object,"create");var ut=function(){this.__data__=ot?ot(null):{},this.size=0};var it=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},at="__lodash_hash_undefined__",ct=Object.prototype.hasOwnProperty;var ft=function(t){var r=this.__data__;if(ot){var e=r[t];return e===at?void 0:e}return ct.call(r,t)?r[t]:void 0},st=Object.prototype.hasOwnProperty;var lt=function(t){var r=this.__data__;return ot?void 0!==r[t]:st.call(r,t)},vt="__lodash_hash_undefined__";var pt=function(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=ot&&void 0===r?vt:r,this};function yt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}yt.prototype.clear=ut,yt.prototype.delete=it,yt.prototype.get=ft,yt.prototype.has=lt,yt.prototype.set=pt;var bt=yt;var dt=function(){this.size=0,this.__data__={hash:new bt,map:new(nt||p),string:new bt}};var ht=function(t){var r=g(t);return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t};var gt=function(t,r){var e=t.__data__;return ht(r)?e["string"==typeof r?"string":"hash"]:e.map};var jt=function(t){var r=gt(this,t).delete(t);return this.size-=r?1:0,r};var _t=function(t){return gt(this,t).get(t)};var mt=function(t){return gt(this,t).has(t)};var wt=function(t,r){var e=gt(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this};function Ot(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}Ot.prototype.clear=dt,Ot.prototype.delete=jt,Ot.prototype.get=_t,Ot.prototype.has=mt,Ot.prototype.set=wt;var At=Ot,xt=200;var St=function(t,r){var e=this.__data__;if(e instanceof p){var n=e.__data__;if(!nt||n.length<xt-1)return n.push([t,r]),this.size=++e.size,this;e=this.__data__=new At(n)}return e.set(t,r),this.size=e.size,this};function Ut(t){var r=this.__data__=new p(t);this.size=r.size}Ut.prototype.clear=y,Ut.prototype.delete=b,Ut.prototype.get=d,Ut.prototype.has=h,Ut.prototype.set=St;var kt=Ut;var Bt=function(t,r){for(var e=-1,n=null==t?0:t.length;++e<n&&!1!==r(t[e],e,t););return t},Mt=function(){try{var t=et(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var Pt=function(t,r,e){"__proto__"==r&&Mt?Mt(t,r,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[r]=e},It=Object.prototype.hasOwnProperty;var Et=function(t,r,e){var n=t[r];It.call(t,r)&&u(n,e)&&(void 0!==e||r in t)||Pt(t,r,e)};var Tt=function(t,r,e,n){var o=!e;e||(e={});for(var u=-1,i=r.length;++u<i;){var a=r[u],c=n?n(e[a],t[a],a,e,t):void 0;void 0===c&&(c=t[a]),o?Pt(e,a,c):Et(e,a,c)}return e};var zt=function(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n};var Dt=function(t){return null!=t&&"object"==g(t)},Qt="[object Arguments]";var Nt=function(t){return Dt(t)&&z(t)==Qt},Ft=Object.prototype,Lt=Ft.hasOwnProperty,$t=Ft.propertyIsEnumerable,Wt=Nt(function(){return arguments}())?Nt:function(t){return Dt(t)&&Lt.call(t,"callee")&&!$t.call(t,"callee")},Ct=Array.isArray;var Rt=function(){return!1},qt=_((function(t,r){var e=r&&!r.nodeType&&r,n=e&&t&&!t.nodeType&&t,o=n&&n.exports===e?O.Buffer:void 0,u=(o?o.isBuffer:void 0)||Rt;t.exports=u})),Vt=9007199254740991,Gt=/^(?:0|[1-9]\d*)$/;var Jt=function(t,r){var e=g(t);return!!(r=null==r?Vt:r)&&("number"==e||"symbol"!=e&&Gt.test(t))&&t>-1&&t%1==0&&t<r},Ht=9007199254740991;var Kt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Ht},Xt={};Xt["[object Float32Array]"]=Xt["[object Float64Array]"]=Xt["[object Int8Array]"]=Xt["[object Int16Array]"]=Xt["[object Int32Array]"]=Xt["[object Uint8Array]"]=Xt["[object Uint8ClampedArray]"]=Xt["[object Uint16Array]"]=Xt["[object Uint32Array]"]=!0,Xt["[object Arguments]"]=Xt["[object Array]"]=Xt["[object ArrayBuffer]"]=Xt["[object Boolean]"]=Xt["[object DataView]"]=Xt["[object Date]"]=Xt["[object Error]"]=Xt["[object Function]"]=Xt["[object Map]"]=Xt["[object Number]"]=Xt["[object Object]"]=Xt["[object RegExp]"]=Xt["[object Set]"]=Xt["[object String]"]=Xt["[object WeakMap]"]=!1;var Yt=function(t){return Dt(t)&&Kt(t.length)&&!!Xt[z(t)]};var Zt=function(t){return function(r){return t(r)}},tr=_((function(t,r){var e=r&&!r.nodeType&&r,n=e&&t&&!t.nodeType&&t,o=n&&n.exports===e&&m.process,u=function(){try{var t=n&&n.require&&n.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=u})),rr=tr&&tr.isTypedArray,er=rr?Zt(rr):Yt,nr=Object.prototype.hasOwnProperty;var or=function(t,r){var e=Ct(t),n=!e&&Wt(t),o=!e&&!n&&qt(t),u=!e&&!n&&!o&&er(t),i=e||n||o||u,a=i?zt(t.length,String):[],c=a.length;for(var f in t)!r&&!nr.call(t,f)||i&&("length"==f||o&&("offset"==f||"parent"==f)||u&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||Jt(f,c))||a.push(f);return a},ur=Object.prototype;var ir=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||ur)};var ar=function(t,r){return function(e){return t(r(e))}},cr=ar(Object.keys,Object),fr=Object.prototype.hasOwnProperty;var sr=function(t){if(!ir(t))return cr(t);var r=[];for(var e in Object(t))fr.call(t,e)&&"constructor"!=e&&r.push(e);return r};var lr=function(t){return null!=t&&Kt(t.length)&&!W(t)};var vr=function(t){return lr(t)?or(t):sr(t)};var pr=function(t,r){return t&&Tt(r,vr(r),t)};var yr=function(t){var r=[];if(null!=t)for(var e in Object(t))r.push(e);return r},br=Object.prototype.hasOwnProperty;var dr=function(t){if(!D(t))return yr(t);var r=ir(t),e=[];for(var n in t)("constructor"!=n||!r&&br.call(t,n))&&e.push(n);return e};var hr=function(t){return lr(t)?or(t,!0):dr(t)};var gr=function(t,r){return t&&Tt(r,hr(r),t)},jr=_((function(t,r){var e=r&&!r.nodeType&&r,n=e&&t&&!t.nodeType&&t,o=n&&n.exports===e?O.Buffer:void 0,u=o?o.allocUnsafe:void 0;t.exports=function(t,r){if(r)return t.slice();var e=t.length,n=u?u(e):new t.constructor(e);return t.copy(n),n}}));var _r=function(t,r){var e=-1,n=t.length;for(r||(r=Array(n));++e<n;)r[e]=t[e];return r};var mr=function(t,r){for(var e=-1,n=null==t?0:t.length,o=0,u=[];++e<n;){var i=t[e];r(i,e,t)&&(u[o++]=i)}return u};var wr=function(){return[]},Or=Object.prototype.propertyIsEnumerable,Ar=Object.getOwnPropertySymbols,xr=Ar?function(t){return null==t?[]:(t=Object(t),mr(Ar(t),(function(r){return Or.call(t,r)})))}:wr;var Sr=function(t,r){return Tt(t,xr(t),r)};var Ur=function(t,r){for(var e=-1,n=r.length,o=t.length;++e<n;)t[o+e]=r[e];return t},kr=ar(Object.getPrototypeOf,Object),Br=Object.getOwnPropertySymbols?function(t){for(var r=[];t;)Ur(r,xr(t)),t=kr(t);return r}:wr;var Mr=function(t,r){return Tt(t,Br(t),r)};var Pr=function(t,r,e){var n=r(t);return Ct(t)?n:Ur(n,e(t))};var Ir=function(t){return Pr(t,vr,xr)};var Er=function(t){return Pr(t,hr,Br)},Tr=et(O,"DataView"),zr=et(O,"Promise"),Dr=et(O,"Set"),Qr=et(O,"WeakMap"),Nr=G(Tr),Fr=G(nt),Lr=G(zr),$r=G(Dr),Wr=G(Qr),Cr=z;(Tr&&"[object DataView]"!=Cr(new Tr(new ArrayBuffer(1)))||nt&&"[object Map]"!=Cr(new nt)||zr&&"[object Promise]"!=Cr(zr.resolve())||Dr&&"[object Set]"!=Cr(new Dr)||Qr&&"[object WeakMap]"!=Cr(new Qr))&&(Cr=function(t){var r=z(t),e="[object Object]"==r?t.constructor:void 0,n=e?G(e):"";if(n)switch(n){case Nr:return"[object DataView]";case Fr:return"[object Map]";case Lr:return"[object Promise]";case $r:return"[object Set]";case Wr:return"[object WeakMap]"}return r});var Rr=Cr,qr=Object.prototype.hasOwnProperty;var Vr=function(t){var r=t.length,e=new t.constructor(r);return r&&"string"==typeof t[0]&&qr.call(t,"index")&&(e.index=t.index,e.input=t.input),e},Gr=O.Uint8Array;var Jr=function(t){var r=new t.constructor(t.byteLength);return new Gr(r).set(new Gr(t)),r};var Hr=function(t,r){var e=r?Jr(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)},Kr=/\w*$/;var Xr=function(t){var r=new t.constructor(t.source,Kr.exec(t));return r.lastIndex=t.lastIndex,r},Yr=A?A.prototype:void 0,Zr=Yr?Yr.valueOf:void 0;var te=function(t){return Zr?Object(Zr.call(t)):{}};var re=function(t,r){var e=r?Jr(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)},ee="[object Boolean]",ne="[object Date]",oe="[object Map]",ue="[object Number]",ie="[object RegExp]",ae="[object Set]",ce="[object String]",fe="[object Symbol]",se="[object ArrayBuffer]",le="[object DataView]",ve="[object Float32Array]",pe="[object Float64Array]",ye="[object Int8Array]",be="[object Int16Array]",de="[object Int32Array]",he="[object Uint8Array]",ge="[object Uint8ClampedArray]",je="[object Uint16Array]",_e="[object Uint32Array]";var me=function(t,r,e){var n=t.constructor;switch(r){case se:return Jr(t);case ee:case ne:return new n(+t);case le:return Hr(t,e);case ve:case pe:case ye:case be:case de:case he:case ge:case je:case _e:return re(t,e);case oe:return new n;case ue:case ce:return new n(t);case ie:return Xr(t);case ae:return new n;case fe:return te(t)}},we=Object.create,Oe=function(){function t(){}return function(r){if(!D(r))return{};if(we)return we(r);t.prototype=r;var e=new t;return t.prototype=void 0,e}}();var Ae=function(t){return"function"!=typeof t.constructor||ir(t)?{}:Oe(kr(t))},xe="[object Map]";var Se=function(t){return Dt(t)&&Rr(t)==xe},Ue=tr&&tr.isMap,ke=Ue?Zt(Ue):Se,Be="[object Set]";var Me=function(t){return Dt(t)&&Rr(t)==Be},Pe=tr&&tr.isSet,Ie=Pe?Zt(Pe):Me,Ee=1,Te=2,ze=4,De="[object Arguments]",Qe="[object Function]",Ne="[object GeneratorFunction]",Fe="[object Object]",Le={};Le[De]=Le["[object Array]"]=Le["[object ArrayBuffer]"]=Le["[object DataView]"]=Le["[object Boolean]"]=Le["[object Date]"]=Le["[object Float32Array]"]=Le["[object Float64Array]"]=Le["[object Int8Array]"]=Le["[object Int16Array]"]=Le["[object Int32Array]"]=Le["[object Map]"]=Le["[object Number]"]=Le[Fe]=Le["[object RegExp]"]=Le["[object Set]"]=Le["[object String]"]=Le["[object Symbol]"]=Le["[object Uint8Array]"]=Le["[object Uint8ClampedArray]"]=Le["[object Uint16Array]"]=Le["[object Uint32Array]"]=!0,Le["[object Error]"]=Le[Qe]=Le["[object WeakMap]"]=!1;var $e=function t(r,e,n,o,u,i){var a,c=e&Ee,f=e&Te,s=e&ze;if(n&&(a=u?n(r,o,u,i):n(r)),void 0!==a)return a;if(!D(r))return r;var l=Ct(r);if(l){if(a=Vr(r),!c)return _r(r,a)}else{var v=Rr(r),p=v==Qe||v==Ne;if(qt(r))return jr(r,c);if(v==Fe||v==De||p&&!u){if(a=f||p?{}:Ae(r),!c)return f?Mr(r,gr(a,r)):Sr(r,pr(a,r))}else{if(!Le[v])return u?r:{};a=me(r,v,c)}}i||(i=new kt);var y=i.get(r);if(y)return y;i.set(r,a),Ie(r)?r.forEach((function(o){a.add(t(o,e,n,o,r,i))})):ke(r)&&r.forEach((function(o,u){a.set(u,t(o,e,n,u,r,i))}));var b=s?f?Er:Ir:f?keysIn:vr,d=l?void 0:b(r);return Bt(d||r,(function(o,u){d&&(o=r[u=o]),Et(a,u,t(o,e,n,u,r,i))})),a},We=1,Ce=4;var Re=function(t){return $e(t,We|Ce)},qe="[object Symbol]";var Ve=function(t){return"symbol"==g(t)||Dt(t)&&z(t)==qe},Ge=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Je=/^\w*$/;var He=function(t,r){if(Ct(t))return!1;var e=g(t);return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!Ve(t))||(Je.test(t)||!Ge.test(t)||null!=r&&t in Object(r))},Ke="Expected a function";function Xe(t,r){if("function"!=typeof t||null!=r&&"function"!=typeof r)throw new TypeError(Ke);var e=function e(){var n=arguments,o=r?r.apply(this,n):n[0],u=e.cache;if(u.has(o))return u.get(o);var i=t.apply(this,n);return e.cache=u.set(o,i)||u,i};return e.cache=new(Xe.Cache||At),e}Xe.Cache=At;var Ye=Xe,Ze=500;var tn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rn=/\\(\\)?/g,en=function(t){var r=Ye(t,(function(t){return e.size===Ze&&e.clear(),t})),e=r.cache;return r}((function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(tn,(function(t,e,n,o){r.push(n?o.replace(rn,"$1"):e||t)})),r}));var nn=function(t,r){for(var e=-1,n=null==t?0:t.length,o=Array(n);++e<n;)o[e]=r(t[e],e,t);return o},on=1/0,un=A?A.prototype:void 0,an=un?un.toString:void 0;var cn=function t(r){if("string"==typeof r)return r;if(Ct(r))return nn(r,t)+"";if(Ve(r))return an?an.call(r):"";var e=r+"";return"0"==e&&1/r==-on?"-0":e};var fn=function(t){return null==t?"":cn(t)};var sn=function(t,r){return Ct(t)?t:He(t,r)?[t]:en(fn(t))},ln=1/0;var vn=function(t){if("string"==typeof t||Ve(t))return t;var r=t+"";return"0"==r&&1/t==-ln?"-0":r};var pn=function(t,r){for(var e=0,n=(r=sn(r,t)).length;null!=t&&e<n;)t=t[vn(r[e++])];return e&&e==n?t:void 0};var yn=function(t,r,e){var n=null==t?void 0:pn(t,r);return void 0===n?e:n};function bn(){var t,r,e=new Promise((function(){t=arguments[0],r=arguments[1]}));return e.resolve=t,e.reject=r,e}var dn=NaN,hn=/^\s+|\s+$/g,gn=/^[-+]0x[0-9a-f]+$/i,jn=/^0b[01]+$/i,_n=/^0o[0-7]+$/i,mn=parseInt;var wn=function(t){if("number"==typeof t)return t;if(Ve(t))return dn;if(D(t)){var r="function"==typeof t.valueOf?t.valueOf():t;t=D(r)?r+"":r}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(hn,"");var e=jn.test(t);return e||_n.test(t)?mn(t.slice(2),e?2:8):gn.test(t)?dn:+t},On=1/0,An=17976931348623157e292;var xn=function(t){return t?(t=wn(t))===On||t===-On?(t<0?-1:1)*An:t==t?t:0:0===t?t:0};var Sn=function(t){var r=xn(t),e=r%1;return r==r?e?r-e:r:0};var Un=function(t){return"number"==typeof t&&t==Sn(t)};function kn(t){return"[object String]"===Object.prototype.toString.call(t)}function Bn(t){return!(!kn(t)||""===t)}function Mn(t){var r=!1;return Bn(t)?r=!isNaN(Number(t)):function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)&&(r=!0),r}function Pn(t){return Mn(t)?xn(t):0}var In=O.isFinite,En=Math.min;var Tn=function(t){var r=Math[t];return function(t,e){if(t=wn(t),(e=null==e?0:En(Sn(e),292))&&In(t)){var n=(fn(t)+"e").split("e"),o=r(n[0]+"e"+(+n[1]+e));return+((n=(fn(o)+"e").split("e"))[0]+"e"+(+n[1]-e))}return r(t)}}("round");function zn(t){return!!function(t){return!!Mn(t)&&(t=Pn(t),Un(t))}(t)&&function(t){if(!Mn(t))return 0;t=Pn(t);var r=Tn(t);return"0"===String(r)?0:r}(t)>0}function Dn(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=[],o=e.length;if(zn(r))for(t=0;t<r;t++)n[t]=e[0|Math.random()*o];else{if("rfc4122"!==r)return"";var u;for(n[8]=n[13]=n[18]=n[23]="-",n[14]="4",t=0;t<36;t++)n[t]||(u=0|16*Math.random(),n[t]=e[19===t?3&u|8:u])}return n.join("")}function Qn(t){return"[object Object]"===Object.prototype.toString.call(t)}function Nn(t,r){return function(t){if(Qn(t)){for(var r in t)return!0;return!1}return!1}(t)&&Bn(r)?yn(t,r,""):""}function Fn(t,r){var e,n=Nn(t,r);return n=Bn(e=n)||Mn(e)?String(e):""}var Ln=function(t,r,e){var n=-1,o=t.length;r<0&&(r=-r>o?0:o+r),(e=e>o?o:e)<0&&(e+=o),o=r>e?0:e-r>>>0,r>>>=0;for(var u=Array(o);++n<o;)u[n]=t[n+r];return u};var $n=function(t,r,e){if(!D(e))return!1;var n=g(r);return!!("number"==n?lr(e)&&Jt(r,e.length):"string"==n&&r in e)&&u(e[r],t)},Wn=Math.ceil,Cn=Math.max;var Rn=function(t,r,e){r=(e?$n(t,r,e):void 0===r)?1:Cn(Sn(r),0);var n=null==t?0:t.length;if(!n||r<1)return[];for(var o=0,u=0,i=Array(Wn(n/r));o<n;)i[u++]=Ln(t,o,o+=r);return i},qn=Array.prototype.join;var Vn=function(t,r){return null==t?"":qn.call(t,r)};var Gn=function(t){return function(r,e,n){for(var o=-1,u=Object(r),i=n(r),a=i.length;a--;){var c=i[t?a:++o];if(!1===e(u[c],c,u))break}return r}}();var Jn=function(t,r){return function(e,n){if(null==e)return e;if(!lr(e))return t(e,n);for(var o=e.length,u=r?o:-1,i=Object(e);(r?u--:++u<o)&&!1!==n(i[u],u,i););return e}}((function(t,r){return t&&Gn(t,r,vr)}));var Hn=function(t){return t};var Kn=function(t){return"function"==typeof t?t:Hn};var Xn=function(t,r){return(Ct(t)?Bt:Jn)(t,Kn(r))};function Yn(t){return"[object Uint8Array]"===Object.prototype.toString.call(t)}function Zn(t){return"[object Uint16Array]"===Object.prototype.toString.call(t)}function to(t,r){return Bn(t)&&zn(r)?t.substr(0,r):""}function ro(t,r){return Bn(t)&&zn(r)?function(t,r){if(!Bn(t))return"";if(!zn(r))return"";var e=t.length-r;return e<0&&(e=0),t.substr(e,r)}(t,t.length-r):""}function eo(t){return Yn(t)?n.create(t).toString(e):""}function no(t){if(!kn(t))return new Uint8Array;for(var r=e.parse(t),n=r.words,o=r.sigBytes,u=new Uint8Array(o),i=0;i<o;i++){var a=n[i>>>2]>>>24-i%4*8&255;u[i]=a}return u}function oo(t){return Zn(t)?eo(function(t){return Zn(t)?new Uint8Array(t):new Uint8Array}(t)):""}function uo(t){return kn(t)?function(t){return Yn(t)?new Uint16Array(t):new Uint16Array}(no(t)):new Uint16Array}var io="[Uint8Array]::";var ao="[Uint16Array]::";var co={tagU8A:io,u8arr2b64:function(t){return Yn(t)?io+eo(t):t},b642u8arr:function(t){return kn(t)&&to(t,io.length)===io?no(t=ro(t,io.length)):t},tagU16A:ao,u16arr2b64:function(t){return Zn(t)?ao+oo(t):t},b642u16arr:function(t){return kn(t)&&to(t,ao.length)===ao?uo(t=ro(t,ao.length)):t}};function fo(t){return"[object Array]"===Object.prototype.toString.call(t)}function so(t){var r,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Uint8Array";if(r=t,"[object Undefined]"===Object.prototype.toString.call(r))return"";if(kn(e))e=[e];else if(!fo(e))return"";var n="";try{n=JSON.stringify(t,(function(t,r){return e.indexOf("Uint8Array")>=0&&(r=co.u8arr2b64(r)),e.indexOf("Uint16Array")>=0&&(r=co.u16arr2b64(r)),r}))}catch(t){n=""}return n}var lo=function(t,r,e){var n=t.length;return e=void 0===e?n:e,!r&&e>=n?t:Ln(t,r,e)},vo=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var po=function(t){return vo.test(t)},yo="[object RegExp]";var bo=function(t){return Dt(t)&&z(t)==yo},ho=tr&&tr.isRegExp,go=ho?Zt(ho):bo;var jo=function(t){return t.split("")},_o="[\\ud800-\\udfff]",mo="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",wo="\\ud83c[\\udffb-\\udfff]",Oo="[^\\ud800-\\udfff]",Ao="(?:\\ud83c[\\udde6-\\uddff]){2}",xo="[\\ud800-\\udbff][\\udc00-\\udfff]",So="(?:"+mo+"|"+wo+")"+"?",Uo="[\\ufe0e\\ufe0f]?"+So+("(?:\\u200d(?:"+[Oo,Ao,xo].join("|")+")[\\ufe0e\\ufe0f]?"+So+")*"),ko="(?:"+[Oo+mo+"?",mo,Ao,xo,_o].join("|")+")",Bo=RegExp(wo+"(?="+wo+")|"+ko+Uo,"g");var Mo=function(t){return t.match(Bo)||[]};var Po=function(t){return po(t)?Mo(t):jo(t)},Io=4294967295;var Eo=function(t,r,e){return e&&"number"!=typeof e&&$n(t,r,e)&&(r=e=void 0),(e=void 0===e?Io:e>>>0)?(t=fn(t))&&("string"==typeof r||null!=r&&!go(r))&&!(r=cn(r))&&po(t)?lo(Po(t),0,e):t.split(r,e):[]};var To=function(t,r,e){var n=null==t?0:t.length;return n?(r=e||void 0===r?1:Sn(r),Ln(t,r<0?0:r,n)):[]},zo=Math.ceil,Do=Math.max;var Qo=function(t,r,e,n){for(var o=-1,u=Do(zo((r-t)/(e||1)),0),i=Array(u);u--;)i[n?u:++o]=t,t+=e;return i};var No=function(t){return function(r,e,n){return n&&"number"!=typeof n&&$n(r,e,n)&&(e=n=void 0),r=xn(r),void 0===e?(e=r,r=0):e=xn(e),n=void 0===n?r<e?1:-1:xn(n),Qo(r,e,n,t)}}();var Fo={};function Lo(t,r){var e,n,o=Eo(t,"|"),u=o[0],i=wn(o[1]),a=wn(o[2]),c=Vn(To(o,3),"|");if(n=u,Qn(e=Fo)&&Bn(n)&&n in e||(Fo[u]={}),Fo[u]["_"+i]=c,i===a-1){var f="";Xn(No(a),(function(t){f+=Fo[u]["_"+t]})),delete Fo[u],r(function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Uint8Array";if(kn(r))r=[r];else if(!fo(r))return{};var e={};try{e=JSON.parse(t,(function(t,e){return r.indexOf("Uint8Array")>=0&&(e=co.b642u8arr(e)),r.indexOf("Uint16Array")>=0&&(e=co.b642u16arr(e)),e}))}catch(t){e={}}return e}(f))}}function $o(e){var n=!1,o=null,u=new t,i=new t;function a(t){for(var r=arguments.length,e=new Array(r>1?r-1:0),n=1;n<r;n++)e[n-1]=arguments[n];setTimeout((function(){u.emit.apply(u,[t].concat(e))}),1)}function c(){e.url||(e.url="ws://localhost:8080"),e.token||(e.token="*"),e.strSplitLength||(e.strSplitLength=1e6);var t={url:e.url,token:e.token,open:function(){a("open"),n||(a("openOnce"),n=!0)},close:function(){a("close"),f()},message:function(t){!function(t){Lo(t,s)}(t)},error:function(t){c(t)}};try{o=new r(t)}catch(t){return a("error",{msg:"can not create websocket",err:t}),void f()}if(yn(o,"error"))return a("error",{msg:"can not create websocket",err:"can not new MixWS in WWebsocketClient"}),void f();function c(t){a("error",{msg:"websocket error",err:t}),o.close()}function s(t){var r=Fn(t,"_mode");if("execute"===r)if(yn(t,"_id")&&yn(t,"output")){var e=yn(t,"_id"),n=yn(t,"output");i.emit(e,n)}else a("error",{msg:"can not find _id and output in data",err:t});else"broadcast"===r?a("broadcast",yn(t,"data")):"deliver"===r?a("deliver",yn(t,"data")):c({msg:"can not find _mode in data",err:t})}function l(t,r){o.readyState===o.OPEN&&function(t,r,e,n,o){var u=so(e),i=Rn(u,r),a=Dn(),c=i.length;Xn(i,(function(r,e){r=Vn(r,"");var u="".concat(a,"|").concat(e,"|").concat(c,"|").concat(r);t.send(u,(function(t){t&&W(o)&&o(t)})),W(n)&&n((e+1)/c*100)}))}(o,e.strSplitLength,t,r,(function(t){a("error",{msg:"can not send message",err:t})}))}u.removeAllListeners("triggerExecute"),u.on("triggerExecute",(function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=Dn();l({_mode:"execute",_id:o,func:t,input:r},n),i.on(o,(function(t){e(t),i.removeAllListeners(o)}))})),u.removeAllListeners("triggerBroadcast"),u.on("triggerBroadcast",(function(t,r){l({_mode:"broadcast",data:t},r)})),u.removeAllListeners("triggerDeliver"),u.on("triggerDeliver",(function(t,r){l({_mode:"deliver",data:t},r)}))}function f(){setTimeout((function(){a("reconn"),c()}),1e3)}return u.execute=function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},n=bn();return a("triggerExecute",t,r,(function(t){n.resolve(t)}),e),n},u.broadcast=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};a("triggerBroadcast",t,r)},u.deliver=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};a("triggerDeliver",t,r)},c(),u}function Wo(){var t={};return{on:function(r,e){t[r]||(t[r]=[]),t[r].push(e)},emit:function(r){if(t[r]){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];for(var u=0;u<t[r].length;u++){var i;(i=t[r])[u].apply(i,n)}}}}}function Co(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.takeNumLimit||(t.takeNumLimit=0);var r=0,e=[],n=new Wo;return n.get=function(){return e.length>0?(r+=1,e.splice(0,1)[0]):null},n.cb=function(){r-=1,e.length>0&&n.emit("message",e)},n.push=function(o){e.push(o),(t.takeNumLimit<=0||r<t.takeNumLimit)&&n.emit("message",e)},n}return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(t=Re(t)).url||(t.url="ws://localhost:8080"),t.token||(t.token="*"),t.takeNumLimit||(t.takeNumLimit=0);var r=new $o(t),e=new Co(t);return e.on("message",(function(t){var n=e.get();n&&r.emit("queueChange",yn(n,"topic",null),yn(n,"id",null),yn(n,"input",null),yn(n,"output",null),yn(n,"state",null),(function(){e.cb()}))})),r.on("deliver",(function(t){yn(t,"topic",null)&&e.push(t)})),r.pushQueue=function(t,e){var n={topic:t,input:e,option:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}};return r.execute("pushQueue",n)},r.modifyQueue=function(t,e,n,o,u){var i={topic:t,id:e,input:n,output:o,state:u};return r.execute("modifyQueue",i)},r.subTopic=function(t){var e={topic:t};return r.execute("subTopic",e)},r.unsubTopic=function(t){var e={topic:t};return r.execute("unsubTopic",e)},r.getQueueByTopic=function(t){var e={topic:t};return r.execute("getQueueByTopic",e)},r.getQueueByID=function(t){var e={id:t};return r.execute("getQueueByID",e)},r.getQueueByIDs=function(t){var e={ids:t};return r.execute("getQueueByIDs",e)},r.getQueueByMatches=function(t){var e={find:t};return r.execute("getQueueByMatches",e)},r.delQueueByTopic=function(t){var e={topic:t};return r.execute("delQueueByTopic",e)},r.delQueueByID=function(t){var e={id:t};return r.execute("delQueueByID",e)},r.delQueueByIDs=function(t){var e={ids:t};return r.execute("delQueueByIDs",e)},r.delQueueByMatches=function(t){var e={find:t};return r.execute("delQueueByMatches",e)},r}}));
//# sourceMappingURL=w-runqws-client.umd.js.map
