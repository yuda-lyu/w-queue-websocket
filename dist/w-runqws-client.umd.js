/*!
 * w-runqws-client v1.0.0
 * (c) 2018-2019 yuda-lyu(semisphere)
 * Released under the MIT License.
 */(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("ws")):"function"==typeof define&&define.amd?define(["ws"],t):(e=e||self,e["w-runqws-client"]=t(e.ws))})(this,function(e){'use strict';function t(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){return t={exports:{}},e(t,t.exports),t.exports}function r(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ce&&ce in Object(e)?ne(e):ie(e)}function i(e){var t=n(e);return null!=e&&("object"==t||"function"==t)}function c(e){return!!le&&le in e}function a(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function s(e){var t=n(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function d(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function u(e){var t=this.__data__=new N(e);this.size=t.size}function p(e,t,n){var o=e[t];Ne.call(e,t)&&D(o,n)&&(n!==void 0||t in e)||Re(e,t,n)}function l(e){return null!=e&&"object"==n(e)}function y(e,t){var o=n(e);return t=null==t?9007199254740991:t,!!t&&("number"==o||"symbol"!=o&&ot.test(e))&&-1<e&&0==e%1&&e<t}function b(e,t,n,o,r,i){var c,a=1&t,s=2&t;if(n&&(c=r?n(e,o,r,i):n(e)),void 0!==c)return c;if(!se(e))return e;var d=et(e);if(!d){var u=gn(e),p="[object Function]"==u||"[object GeneratorFunction]"==u;if(nt(e))return Et(e,a);if("[object Object]"!=u&&"[object Arguments]"!=u&&(!p||r)){if(!Dn[u])return r?e:{};c=En(e,u,a)}else if(c=s||p?{}:zn(e),!a)return s?qt(e,Lt(c,e)):Vt(e,vt(c,e))}else if(c=hn(e),!a)return Tt(e,c);i||(i=new Me);var l=i.get(e);if(l)return l;i.set(e,c),Vn(e)?e.forEach(function(o){c.add(b(o,t,n,o,e,i))}):In(e)&&e.forEach(function(o,r){c.set(r,b(o,t,n,r,e,i))});var y=4&t?s?Jt:Gt:s?keysIn:At,g=d?void 0:y(e);return Ve(g||e,function(o,r){g&&(r=o,o=e[r]),We(c,r,b(o,t,n,r,e,i))}),c}function g(e){return"symbol"==n(e)||Ge(e)&&ae(e)=="[object Symbol]"}function f(e,t){if(et(e))return!1;var o=n(e);return!!("number"==o||"symbol"==o||"boolean"==o||null==e||Rn(e))||Nn.test(e)||!Cn.test(e)||null!=t&&e in Object(t)}function _(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var o=arguments,r=t?t.apply(this,o):o[0],i=n.cache;if(i.has(r))return i.get(r);var c=e.apply(this,o);return n.cache=i.set(r,c)||i,c};return n.cache=new(_.Cache||Be),n}function h(e){if("string"==typeof e)return e;if(et(e))return Gn(e,h)+"";if(Rn(e))return Xn?Xn.call(e):"";var t=e+"";return"0"==t&&1/e==-Jn?"-0":t}function j(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t}function m(t){function n(){j(t.open)&&t.open()}function o(){j(t.close)&&t.close()}function r(e){j(t.message)&&t.message(e)}function i(e){j(t.error)&&t.error(e),c.close()}var c=null;t.url||(t.url="ws://localhost:8080"),t.token||(t.token="*");var a,s="undefined"!=typeof window;a=s?window.WebSocket:e;try{c=new a(t.url+"/?token="+t.token)}catch(e){return null}return s?(c.onopen=n,c.onmessage=function(e){var t=e.data;r(t)},c.onclose=o,c.onerror=i):(c.on("open",n),c.on("message",r),c.on("close",o),c.on("error",i)),c}function A(){var e,t,n=new Promise(function(){e=arguments[0],t=arguments[1]});return n.resolve=e,n.reject=t,n}function x(e){var t=Object.prototype.toString.call(e);return"[object String]"===t}function O(e){return!!(x(e)&&""!==e)}function k(e){var t=Object.prototype.toString.call(e);return"[object Number]"===t}function w(e){var t=!1;return O(e)?t=!isNaN(+e):k(e)&&(t=!0),t}function S(e){if(!w(e))return 0;var t=lo(e);return t}function L(e){return!!w(e)&&(e=S(e),bo(e))}function E(e){if(!w(e))return 0;e=S(e);var t=ho(e);return"0"===t+""?0:t}function T(e){if(!L(e))return!1;var t=0<E(e);return t}function P(){var e,t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:32,n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],o=[],c=n.length;if(T(t))for(e=0;e<t;e++)o[e]=n[0|Math.random()*c];else if("rfc4122"===t){o[8]=o[13]=o[18]=o[23]="-",o[14]="4";var a;for(e=0;36>e;e++)o[e]||(a=0|16*Math.random(),o[e]=n[19===e?8|3&a:a])}else return"";var s=o.join("");return s}function z(e){var t=Object.prototype.toString.call(e);return"[object Object]"===t}function F(e){if(z(e)){for(var t in e)return!0;return!1}return!1}function U(e,t){return F(e)?O(t)?to(e,t,""):"":""}function I(e){if(!O(e)&&!w(e))return"";return e+""}function B(e,t){var n=U(e,t);return n=I(n),n}function M(e){if(!O(e))return{};var t={};try{t=JSON.parse(e)}catch(e){t={}}return t}function V(e){function t(e){for(var t=arguments.length,n=Array(1<t?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];setTimeout(function(){a.emit.apply(a,[e].concat(n))},1)}function n(){function n(){t("open")}function s(){r||(t("openOnce"),r=!0)}function d(){t("close"),o()}function u(e){t("error",{msg:"websocket error",err:e}),c.close()}function p(e){var t=M(e);l(t)}function l(e){var n=B(e,"_mode");if("execute"!==n)"broadcast"===n?t("broadcast",to(e,"data")):"deliver"===n?t("deliver",to(e,"data")):u({msg:"can not find _mode in data",err:e});else if(to(e,"_id")&&to(e,"output")){var o=to(e,"_id");i[o]=e}else t("error",{msg:"can not find _id and output in data",err:e})}function y(e){c.readyState===c.OPEN&&c.send(JSON.stringify(e),function(e){e&&t("error",{msg:"can not send message",err:e})})}e.url||(e.url="ws://localhost:8080"),e.token||(e.token="*");var b={url:e.url,token:e.token,open:function(){n(),s()},close:function(){d()},message:function(e){p(e)},error:function(e){u(e)}};try{c=new m(b)}catch(e){t("error",{msg:"can not create websocket",err:e}),o()}a.removeAllListeners("triggerExecute"),a.on("triggerExecute",function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,o=2<arguments.length?arguments[2]:void 0,r=P();i[r]=null,y({_mode:"execute",_id:r,func:e,input:n});var c=setInterval(function(){if(null!==i[r]){var e=to(i[r],"output");delete i[r],o(e),clearInterval(c)}},1e3)}),a.removeAllListeners("triggerBroadcast"),a.on("triggerBroadcast",function(e){y({_mode:"broadcast",data:e})}),a.removeAllListeners("triggerDeliver"),a.on("triggerDeliver",function(e){y({_mode:"deliver",data:e})})}function o(){setTimeout(function(){t("reconn"),n()},1e3)}var r=!1,i={},c=null,a=new no;return a.execute=function(e,n){var o=A();return t("triggerExecute",e,n,function(e){o.resolve(e)}),o},a.broadcast=function(e){t("triggerBroadcast",e)},a.deliver=function(e){t("triggerDeliver",e)},n(),a}e=e&&e.hasOwnProperty("default")?e["default"]:e;var D=function(e,t){return e===t||e!==e&&t!==t},Q=function(e,t){for(var n=e.length;n--;)if(D(e[n][0],t))return n;return-1},R=Array.prototype,C=R.splice;t.prototype.clear=function(){this.__data__=[],this.size=0},t.prototype["delete"]=function(e){var t=this.__data__,n=Q(t,e);if(0>n)return!1;var o=t.length-1;return n==o?t.pop():C.call(t,n,1),--this.size,!0},t.prototype.get=function(e){var t=this.__data__,n=Q(t,e);return 0>n?void 0:t[n][1]},t.prototype.has=function(e){return-1<Q(this.__data__,e)},t.prototype.set=function(e,t){var n=this.__data__,o=Q(n,e);return 0>o?(++this.size,n.push([e,t])):n[o][1]=t,this};var N=t,W="undefined"==typeof globalThis?"undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window:globalThis,q="object"==n(W)&&W&&W.Object===Object&&W,$=q,G="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,J=$||G||Function("return this")(),H=J,X=H.Symbol,Y=X,Z=Object.prototype,K=Z.hasOwnProperty,ee=Z.toString,te=Y?Y.toStringTag:void 0,ne=function(e){var t=K.call(e,te),n=e[te];try{e[te]=void 0;var o=!0}catch(t){}var r=ee.call(e);return o&&(t?e[te]=n:delete e[te]),r},oe=Object.prototype,re=oe.toString,ie=function(e){return re.call(e)},ce=Y?Y.toStringTag:void 0,ae=r,se=i,de=function(e){if(!se(e))return!1;var t=ae(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},ue=H["__core-js_shared__"],pe=ue,le=function(){var e=/[^.]+$/.exec(pe&&pe.keys&&pe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ye=Function.prototype,be=ye.toString,ge=function(e){if(null!=e){try{return be.call(e)}catch(t){}try{return e+""}catch(t){}}return""},fe=/[\\^$.*+?()[\]{}|]/g,_e=/^\[object .+?Constructor\]$/,he=Function.prototype,je=Object.prototype,me=he.toString,Ae=je.hasOwnProperty,ve=RegExp("^"+me.call(Ae).replace(fe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xe=function(e){if(!se(e)||c(e))return!1;var t=de(e)?ve:_e;return t.test(ge(e))},Oe=function(e,t){return null==e?void 0:e[t]},ke=function(e,t){var n=Oe(e,t);return xe(n)?n:void 0},we=ke(H,"Map"),Se=we,Le=ke(Object,"create"),Ee=Le,Te=Object.prototype,Pe=Te.hasOwnProperty,ze=Object.prototype,Fe=ze.hasOwnProperty;a.prototype.clear=function(){this.__data__=Ee?Ee(null):{},this.size=0},a.prototype["delete"]=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},a.prototype.get=function(e){var t=this.__data__;if(Ee){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return Pe.call(t,e)?t[e]:void 0},a.prototype.has=function(e){var t=this.__data__;return Ee?t[e]!==void 0:Fe.call(t,e)},a.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ee&&void 0===t?"__lodash_hash_undefined__":t,this};var Ue=a,Ie=function(e,t){var n=e.__data__;return s(t)?n["string"==typeof t?"string":"hash"]:n.map};d.prototype.clear=function(){this.size=0,this.__data__={hash:new Ue,map:new(Se||N),string:new Ue}},d.prototype["delete"]=function(e){var t=Ie(this,e)["delete"](e);return this.size-=t?1:0,t},d.prototype.get=function(e){return Ie(this,e).get(e)},d.prototype.has=function(e){return Ie(this,e).has(e)},d.prototype.set=function(e,t){var n=Ie(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this};var Be=d;u.prototype.clear=function(){this.__data__=new N,this.size=0},u.prototype["delete"]=function(e){var t=this.__data__,n=t["delete"](e);return this.size=t.size,n},u.prototype.get=function(e){return this.__data__.get(e)},u.prototype.has=function(e){return this.__data__.has(e)},u.prototype.set=function(e,t){var n=this.__data__;if(n instanceof N){var o=n.__data__;if(!Se||199>o.length)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new Be(o)}return n.set(e,t),this.size=n.size,this};var Me=u,Ve=function(e,t){for(var n=-1,o=null==e?0:e.length;++n<o&&!(!1===t(e[n],n,e)););return e},De=function(){try{var e=ke(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),Qe=De,Re=function(e,t,n){"__proto__"==t&&Qe?Qe(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},Ce=Object.prototype,Ne=Ce.hasOwnProperty,We=p,qe=function(e,t,n,o){var r=!n;n||(n={});for(var i=-1,c=t.length;++i<c;){var a=t[i],s=o?o(n[a],e[a],a,n,e):void 0;s===void 0&&(s=e[a]),r?Re(n,a,s):We(n,a,s)}return n},$e=function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o},Ge=l,Je=function(e){return Ge(e)&&ae(e)=="[object Arguments]"},He=Object.prototype,Xe=He.hasOwnProperty,Ye=He.propertyIsEnumerable,Ze=Je(function(){return arguments}())?Je:function(e){return Ge(e)&&Xe.call(e,"callee")&&!Ye.call(e,"callee")},Ke=Array.isArray,et=Ke,tt=function(){return!1},nt=o(function(e,t){var n=t&&!t.nodeType&&t,o=n&&!0&&e&&!e.nodeType&&e,r=o&&o.exports===n,i=r?H.Buffer:void 0,c=i?i.isBuffer:void 0;e.exports=c||tt}),ot=/^(?:0|[1-9]\d*)$/,rt=function(e){return"number"==typeof e&&-1<e&&0==e%1&&e<=9007199254740991},it={};it["[object Float32Array]"]=it["[object Float64Array]"]=it["[object Int8Array]"]=it["[object Int16Array]"]=it["[object Int32Array]"]=it["[object Uint8Array]"]=it["[object Uint8ClampedArray]"]=it["[object Uint16Array]"]=it["[object Uint32Array]"]=!0,it["[object Arguments]"]=it["[object Array]"]=it["[object ArrayBuffer]"]=it["[object Boolean]"]=it["[object DataView]"]=it["[object Date]"]=it["[object Error]"]=it["[object Function]"]=it["[object Map]"]=it["[object Number]"]=it["[object Object]"]=it["[object RegExp]"]=it["[object Set]"]=it["[object String]"]=it["[object WeakMap]"]=!1;var ct=function(e){return function(t){return e(t)}},at=o(function(e,t){var n=t&&!t.nodeType&&t,o=n&&!0&&e&&!e.nodeType&&e,r=o&&o.exports===n,i=r&&$.process,c=function(){try{var e=o&&o.require&&o.require("util").types;return e?e:i&&i.binding&&i.binding("util")}catch(t){}}();e.exports=c}),st=at&&at.isTypedArray,dt=st?ct(st):function(e){return Ge(e)&&rt(e.length)&&!!it[ae(e)]},ut=Object.prototype,pt=ut.hasOwnProperty,lt=function(e,t){var n=et(e),o=!n&&Ze(e),r=!n&&!o&&nt(e),i=!n&&!o&&!r&&dt(e),c=n||o||r||i,a=c?$e(e.length,String):[],s=a.length;for(var d in e)(t||pt.call(e,d))&&!(c&&("length"==d||r&&("offset"==d||"parent"==d)||i&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||y(d,s)))&&a.push(d);return a},yt=Object.prototype,bt=function(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||yt;return e===n},gt=function(e,t){return function(n){return e(t(n))}},ft=gt(Object.keys,Object),_t=Object.prototype,ht=_t.hasOwnProperty,jt=function(e){if(!bt(e))return ft(e);var t=[];for(var n in Object(e))ht.call(e,n)&&"constructor"!=n&&t.push(n);return t},mt=function(e){return null!=e&&rt(e.length)&&!de(e)},At=function(e){return mt(e)?lt(e):jt(e)},vt=function(e,t){return e&&qe(t,At(t),e)},xt=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},Ot=Object.prototype,kt=Ot.hasOwnProperty,wt=function(e){if(!se(e))return xt(e);var t=bt(e),n=[];for(var o in e)("constructor"!=o||!t&&kt.call(e,o))&&n.push(o);return n},St=function(e){return mt(e)?lt(e,!0):wt(e)},Lt=function(e,t){return e&&qe(t,St(t),e)},Et=o(function(e,t){var n=t&&!t.nodeType&&t,o=n&&!0&&e&&!e.nodeType&&e,r=o&&o.exports===n,i=r?H.Buffer:void 0,c=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,o=c?c(n):new e.constructor(n);return e.copy(o),o}}),Tt=function(e,t){var n=-1,o=e.length;for(t||(t=Array(o));++n<o;)t[n]=e[n];return t},Pt=function(e,t){for(var n=-1,o=null==e?0:e.length,r=0,i=[];++n<o;){var c=e[n];t(c,n,e)&&(i[r++]=c)}return i},zt=function(){return[]},Ft=Object.prototype,Ut=Ft.propertyIsEnumerable,It=Object.getOwnPropertySymbols,Bt=It?function(e){return null==e?[]:(e=Object(e),Pt(It(e),function(t){return Ut.call(e,t)}))}:zt,Mt=Bt,Vt=function(e,t){return qe(e,Mt(e),t)},Dt=function(e,t){for(var n=-1,o=t.length,r=e.length;++n<o;)e[r+n]=t[n];return e},Qt=gt(Object.getPrototypeOf,Object),Rt=Qt,Ct=Object.getOwnPropertySymbols,Nt=Ct?function(e){for(var t=[];e;)Dt(t,Mt(e)),e=Rt(e);return t}:zt,Wt=Nt,qt=function(e,t){return qe(e,Wt(e),t)},$t=function(e,t,n){var o=t(e);return et(e)?o:Dt(o,n(e))},Gt=function(e){return $t(e,At,Mt)},Jt=function(e){return $t(e,St,Wt)},Ht=ke(H,"DataView"),Xt=Ht,Yt=ke(H,"Promise"),Zt=Yt,Kt=ke(H,"Set"),en=Kt,tn=ke(H,"WeakMap"),nn=tn,on="[object Map]",rn="[object Promise]",cn="[object Set]",an="[object WeakMap]",sn="[object DataView]",dn=ge(Xt),un=ge(Se),pn=ge(Zt),ln=ge(en),yn=ge(nn),bn=ae;(Xt&&bn(new Xt(new ArrayBuffer(1)))!=sn||Se&&bn(new Se)!=on||Zt&&bn(Zt.resolve())!=rn||en&&bn(new en)!=cn||nn&&bn(new nn)!=an)&&(bn=function(e){var t=ae(e),n=t=="[object Object]"?e.constructor:void 0,o=n?ge(n):"";if(o)switch(o){case dn:return sn;case un:return on;case pn:return rn;case ln:return cn;case yn:return an;}return t});var gn=bn,fn=Object.prototype,_n=fn.hasOwnProperty,hn=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&_n.call(e,"index")&&(n.index=e.index,n.input=e.input),n},jn=H.Uint8Array,mn=jn,An=function(e){var t=new e.constructor(e.byteLength);return new mn(t).set(new mn(e)),t},vn=function(e,t){var n=t?An(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},xn=/\w*$/,On=function(e){var t=new e.constructor(e.source,xn.exec(e));return t.lastIndex=e.lastIndex,t},kn=Y?Y.prototype:void 0,wn=kn?kn.valueOf:void 0,Sn=function(e){return wn?Object(wn.call(e)):{}},Ln=function(e,t){var n=t?An(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},En=function(e,t,n){var o=e.constructor;return"[object ArrayBuffer]"===t?An(e):"[object Boolean]"===t||"[object Date]"===t?new o(+e):"[object DataView]"===t?vn(e,n):"[object Float32Array]"===t||"[object Float64Array]"===t||"[object Int8Array]"===t||"[object Int16Array]"===t||"[object Int32Array]"===t||"[object Uint8Array]"===t||"[object Uint8ClampedArray]"===t||"[object Uint16Array]"===t||"[object Uint32Array]"===t?Ln(e,n):"[object Map]"===t?new o:"[object Number]"===t||"[object String]"===t?new o(e):"[object RegExp]"===t?On(e):"[object Set]"===t?new o:"[object Symbol]"===t?Sn(e):void 0},Tn=Object.create,Pn=function(){function e(){}return function(t){if(!se(t))return{};if(Tn)return Tn(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),zn=function(e){return"function"!=typeof e.constructor||bt(e)?{}:Pn(Rt(e))},Fn=at&&at.isMap,Un=Fn?ct(Fn):function(e){return Ge(e)&&gn(e)=="[object Map]"},In=Un,Bn=at&&at.isSet,Mn=Bn?ct(Bn):function(e){return Ge(e)&&gn(e)=="[object Set]"},Vn=Mn,Dn={};Dn["[object Arguments]"]=Dn["[object Array]"]=Dn["[object ArrayBuffer]"]=Dn["[object DataView]"]=Dn["[object Boolean]"]=Dn["[object Date]"]=Dn["[object Float32Array]"]=Dn["[object Float64Array]"]=Dn["[object Int8Array]"]=Dn["[object Int16Array]"]=Dn["[object Int32Array]"]=Dn["[object Map]"]=Dn["[object Number]"]=Dn["[object Object]"]=Dn["[object RegExp]"]=Dn["[object Set]"]=Dn["[object String]"]=Dn["[object Symbol]"]=Dn["[object Uint8Array]"]=Dn["[object Uint8ClampedArray]"]=Dn["[object Uint16Array]"]=Dn["[object Uint32Array]"]=!0,Dn["[object Error]"]=Dn["[object Function]"]=Dn["[object WeakMap]"]=!1;var Qn=function(e){return b(e,5)},Rn=g,Cn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Nn=/^\w*$/;_.Cache=Be;var Wn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qn=/\\(\\)?/g,$n=function(e){var t=_(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Wn,function(e,n,o,r){t.push(o?r.replace(qn,"$1"):n||e)}),t}),Gn=function(e,t){for(var n=-1,o=null==e?0:e.length,r=Array(o);++n<o;)r[n]=t(e[n],n,e);return r},Jn=1/0,Hn=Y?Y.prototype:void 0,Xn=Hn?Hn.toString:void 0,Yn=function(e){return null==e?"":h(e)},Zn=function(e,t){return et(e)?e:f(e,t)?[e]:$n(Yn(e))},Kn=function(e){if("string"==typeof e||Rn(e))return e;var t=e+"";return"0"==t&&1/e==-(1/0)?"-0":t},eo=function(e,t){t=Zn(t,e);for(var n=0,o=t.length;null!=e&&n<o;)e=e[Kn(t[n++])];return n&&n==o?e:void 0},to=function(e,t,n){var o=null==e?void 0:eo(e,t);return o===void 0?n:o},no=o(function(e){(function(t){function o(){}function r(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function i(e){return function(){return this[e].apply(this,arguments)}}function c(e){return!!("function"==typeof e||e instanceof RegExp)||!!(e&&"object"===n(e))&&c(e.listener)}var a=o.prototype,s=t.EventEmitter;a.getListeners=function(e){var t,n,o=this._getEvents();if(e instanceof RegExp)for(n in t={},o)o.hasOwnProperty(n)&&e.test(n)&&(t[n]=o[n]);else t=o[e]||(o[e]=[]);return t},a.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},a.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},a.addListener=function(e,t){if(!c(t))throw new TypeError("listener must be a function");var o,i=this.getListenersAsObject(e),a="object"===n(t);for(o in i)i.hasOwnProperty(o)&&-1===r(i[o],t)&&i[o].push(a?t:{listener:t,once:!1});return this},a.on=i("addListener"),a.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},a.once=i("addOnceListener"),a.defineEvent=function(e){return this.getListeners(e),this},a.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},a.removeListener=function(e,t){var n,o,i=this.getListenersAsObject(e);for(o in i)i.hasOwnProperty(o)&&(n=r(i[o],t),-1!==n&&i[o].splice(n,1));return this},a.off=i("removeListener"),a.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},a.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},a.manipulateListeners=function(e,t,o){var r,c,a=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"===n(t)&&!(t instanceof RegExp))for(r in t)t.hasOwnProperty(r)&&(c=t[r])&&("function"==typeof c?a.call(this,r,c):s.call(this,r,c));else for(r=o.length;r--;)a.call(this,t,o[r]);return this},a.removeEvent=function(e){var t,o=n(e),r=this._getEvents();if("string"===o)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},a.removeAllListeners=i("removeEvent"),a.emitEvent=function(e,t){var n,o,r,c,a,s=this.getListenersAsObject(e);for(c in s)if(s.hasOwnProperty(c))for(n=s[c].slice(0),r=0;r<n.length;r++)o=n[r],!0===o.once&&this.removeListener(e,o.listener),a=o.listener.apply(this,t||[]),a===this._getOnceReturnValue()&&this.removeListener(e,o.listener);return this},a.trigger=i("emitEvent"),a.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},a.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},a._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},a._getEvents=function(){return this._events||(this._events={})},o.noConflict=function(){return t.EventEmitter=s,o},e.exports?e.exports=o:t.EventEmitter=o})("undefined"==typeof window?W||{}:window)}),oo=0/0,ro=/^\s+|\s+$/g,io=/^[-+]0x[0-9a-f]+$/i,co=/^0b[01]+$/i,ao=/^0o[0-7]+$/i,so=parseInt,uo=function(e){if("number"==typeof e)return e;if(Rn(e))return oo;if(se(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=se(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(ro,"");var n=co.test(e);return n||ao.test(e)?so(e.slice(2),n?2:8):io.test(e)?oo:+e},po=1/0,lo=function(e){if(!e)return 0===e?e:0;if(e=uo(e),e===po||e===-po){var t=0>e?-1:1;return 1.7976931348623157e+308*t}return e===e?e:0},yo=function(e){var t=lo(e),n=t%1;return t===t?n?t-n:t:0},bo=function(e){return"number"==typeof e&&e==yo(e)},go=H.isFinite,fo=Math.min,_o=function(e){var t=Math[e];return function(e,n){if(e=uo(e),n=null==n?0:fo(yo(n),292),n&&go(e)){var o=(Yn(e)+"e").split("e"),r=t(o[0]+"e"+(+o[1]+n));return o=(Yn(r)+"e").split("e"),+(o[0]+"e"+(+o[1]-n))}return t(e)}}("round"),ho=_o;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};e=Qn(e),e.url||(e.url="ws://localhost:8080"),e.token||(e.token="*");var t=new V(e);return t.on("deliver",function(e){var n=to(e,"topic",null);n&&t.emit("queueChange",to(e,"topic",null),to(e,"id",null),to(e,"input",null),to(e,"output",null),to(e,"state",null))}),t.on("pushQueue",function(e,n,o){t.execute("pushQueue",{topic:e,input:n,option:o}).then(function(){})["catch"](function(e){t.emit("error","pushQueue: catch",e)})}),t.on("modifyQueue",function(e,n,o,r,i){t.execute("modifyQueue",{topic:e,id:n,input:o,output:r,state:i}).then(function(){})["catch"](function(e){t.emit("error","modifyQueue: catch",e)})}),t.on("subTopic",function(e){t.execute("subTopic",{topic:e}).then(function(){})["catch"](function(e){t.emit("error","subTopic: catch",e)})}),t.on("unsubTopic",function(e){t.execute("unsubTopic",{topic:e}).then(function(){})["catch"](function(e){t.emit("error","unsubTopic: catch",e)})}),t.pushQueue=function(e,n){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};t.emit("pushQueue",e,n,o)},t.modifyQueue=function(e,n,o,r,i){t.emit("modifyQueue",e,n,o,r,i)},t.subTopic=function(e){t.emit("subTopic",e)},t.unsubTopic=function(e){t.emit("unsubTopic",e)},t}});
//# sourceMappingURL=w-runqws-client.umd.js.map
