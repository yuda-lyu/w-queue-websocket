/*!
 * w-runqws-client v1.0.18
 * (c) 2018-2019 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("ws")):"function"==typeof define&&define.amd?define(["ws"],e):(t=t||self)["w-runqws-client"]=e(t.ws)}(this,(function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e=function(){this.__data__=[],this.size=0};var r=function(t,e){return t===e||t!=t&&e!=e};var n=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1},o=Array.prototype.splice;var i=function(t){var e=this.__data__,r=n(e,t);return!(r<0)&&(r==e.length-1?e.pop():o.call(e,r,1),--this.size,!0)};var u=function(t){var e=this.__data__,r=n(e,t);return r<0?void 0:e[r][1]};var a=function(t){return n(this.__data__,t)>-1};var c=function(t,e){var r=this.__data__,o=n(r,t);return o<0?(++this.size,r.push([t,e])):r[o][1]=e,this};function f(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}f.prototype.clear=e,f.prototype.delete=i,f.prototype.get=u,f.prototype.has=a,f.prototype.set=c;var s=f;var l=function(){this.__data__=new s,this.size=0};var v=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};var p=function(t){return this.__data__.get(t)};var y=function(t){return this.__data__.has(t)};function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function b(t,e){return t(e={exports:{}},e.exports),e.exports}var g="object"==h(d)&&d&&d.Object===Object&&d,_="object"==("undefined"==typeof self?"undefined":h(self))&&self&&self.Object===Object&&self,j=g||_||Function("return this")(),w=j.Symbol,m=Object.prototype,A=m.hasOwnProperty,O=m.toString,x=w?w.toStringTag:void 0;var S=function(t){var e=A.call(t,x),r=t[x];try{t[x]=void 0;var n=!0}catch(t){}var o=O.call(t);return n&&(e?t[x]=r:delete t[x]),o},B=Object.prototype.toString;var U=function(t){return B.call(t)},k="[object Null]",I="[object Undefined]",M=w?w.toStringTag:void 0;var P=function(t){return null==t?void 0===t?I:k:M&&M in Object(t)?S(t):U(t)};var z=function(t){var e=h(t);return null!=t&&("object"==e||"function"==e)},C="[object AsyncFunction]",T="[object Function]",E="[object GeneratorFunction]",D="[object Proxy]";var F,L=function(t){if(!z(t))return!1;var e=P(t);return e==T||e==E||e==C||e==D},Q=j["__core-js_shared__"],N=(F=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||""))?"Symbol(src)_1."+F:"";var W=function(t){return!!N&&N in t},$=Function.prototype.toString;var R=function(t){if(null!=t){try{return $.call(t)}catch(t){}try{return t+""}catch(t){}}return""},H=/^\[object .+?Constructor\]$/,V=Function.prototype,q=Object.prototype,G=V.toString,J=q.hasOwnProperty,K=RegExp("^"+G.call(J).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var X=function(t){return!(!z(t)||W(t))&&(L(t)?K:H).test(R(t))};var Y=function(t,e){return null==t?void 0:t[e]};var Z=function(t,e){var r=Y(t,e);return X(r)?r:void 0},tt=Z(j,"Map"),et=Z(Object,"create");var rt=function(){this.__data__=et?et(null):{},this.size=0};var nt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ot="__lodash_hash_undefined__",it=Object.prototype.hasOwnProperty;var ut=function(t){var e=this.__data__;if(et){var r=e[t];return r===ot?void 0:r}return it.call(e,t)?e[t]:void 0},at=Object.prototype.hasOwnProperty;var ct=function(t){var e=this.__data__;return et?void 0!==e[t]:at.call(e,t)},ft="__lodash_hash_undefined__";var st=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=et&&void 0===e?ft:e,this};function lt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}lt.prototype.clear=rt,lt.prototype.delete=nt,lt.prototype.get=ut,lt.prototype.has=ct,lt.prototype.set=st;var vt=lt;var pt=function(){this.size=0,this.__data__={hash:new vt,map:new(tt||s),string:new vt}};var yt=function(t){var e=h(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var ht=function(t,e){var r=t.__data__;return yt(e)?r["string"==typeof e?"string":"hash"]:r.map};var dt=function(t){var e=ht(this,t).delete(t);return this.size-=e?1:0,e};var bt=function(t){return ht(this,t).get(t)};var gt=function(t){return ht(this,t).has(t)};var _t=function(t,e){var r=ht(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function jt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}jt.prototype.clear=pt,jt.prototype.delete=dt,jt.prototype.get=bt,jt.prototype.has=gt,jt.prototype.set=_t;var wt=jt,mt=200;var At=function(t,e){var r=this.__data__;if(r instanceof s){var n=r.__data__;if(!tt||n.length<mt-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new wt(n)}return r.set(t,e),this.size=r.size,this};function Ot(t){var e=this.__data__=new s(t);this.size=e.size}Ot.prototype.clear=l,Ot.prototype.delete=v,Ot.prototype.get=p,Ot.prototype.has=y,Ot.prototype.set=At;var xt=Ot;var St=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t},Bt=function(){try{var t=Z(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var Ut=function(t,e,r){"__proto__"==e&&Bt?Bt(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},kt=Object.prototype.hasOwnProperty;var It=function(t,e,n){var o=t[e];kt.call(t,e)&&r(o,n)&&(void 0!==n||e in t)||Ut(t,e,n)};var Mt=function(t,e,r,n){var o=!r;r||(r={});for(var i=-1,u=e.length;++i<u;){var a=e[i],c=n?n(r[a],t[a],a,r,t):void 0;void 0===c&&(c=t[a]),o?Ut(r,a,c):It(r,a,c)}return r};var Pt=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n};var zt=function(t){return null!=t&&"object"==h(t)},Ct="[object Arguments]";var Tt=function(t){return zt(t)&&P(t)==Ct},Et=Object.prototype,Dt=Et.hasOwnProperty,Ft=Et.propertyIsEnumerable,Lt=Tt(function(){return arguments}())?Tt:function(t){return zt(t)&&Dt.call(t,"callee")&&!Ft.call(t,"callee")},Qt=Array.isArray;var Nt=function(){return!1},Wt=b((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?j.Buffer:void 0,i=(o?o.isBuffer:void 0)||Nt;t.exports=i})),$t=9007199254740991,Rt=/^(?:0|[1-9]\d*)$/;var Ht=function(t,e){var r=h(t);return!!(e=null==e?$t:e)&&("number"==r||"symbol"!=r&&Rt.test(t))&&t>-1&&t%1==0&&t<e},Vt=9007199254740991;var qt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Vt},Gt={};Gt["[object Float32Array]"]=Gt["[object Float64Array]"]=Gt["[object Int8Array]"]=Gt["[object Int16Array]"]=Gt["[object Int32Array]"]=Gt["[object Uint8Array]"]=Gt["[object Uint8ClampedArray]"]=Gt["[object Uint16Array]"]=Gt["[object Uint32Array]"]=!0,Gt["[object Arguments]"]=Gt["[object Array]"]=Gt["[object ArrayBuffer]"]=Gt["[object Boolean]"]=Gt["[object DataView]"]=Gt["[object Date]"]=Gt["[object Error]"]=Gt["[object Function]"]=Gt["[object Map]"]=Gt["[object Number]"]=Gt["[object Object]"]=Gt["[object RegExp]"]=Gt["[object Set]"]=Gt["[object String]"]=Gt["[object WeakMap]"]=!1;var Jt=function(t){return zt(t)&&qt(t.length)&&!!Gt[P(t)]};var Kt=function(t){return function(e){return t(e)}},Xt=b((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r&&g.process,i=function(){try{var t=n&&n.require&&n.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=i})),Yt=Xt&&Xt.isTypedArray,Zt=Yt?Kt(Yt):Jt,te=Object.prototype.hasOwnProperty;var ee=function(t,e){var r=Qt(t),n=!r&&Lt(t),o=!r&&!n&&Wt(t),i=!r&&!n&&!o&&Zt(t),u=r||n||o||i,a=u?Pt(t.length,String):[],c=a.length;for(var f in t)!e&&!te.call(t,f)||u&&("length"==f||o&&("offset"==f||"parent"==f)||i&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||Ht(f,c))||a.push(f);return a},re=Object.prototype;var ne=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||re)};var oe=function(t,e){return function(r){return t(e(r))}},ie=oe(Object.keys,Object),ue=Object.prototype.hasOwnProperty;var ae=function(t){if(!ne(t))return ie(t);var e=[];for(var r in Object(t))ue.call(t,r)&&"constructor"!=r&&e.push(r);return e};var ce=function(t){return null!=t&&qt(t.length)&&!L(t)};var fe=function(t){return ce(t)?ee(t):ae(t)};var se=function(t,e){return t&&Mt(e,fe(e),t)};var le=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e},ve=Object.prototype.hasOwnProperty;var pe=function(t){if(!z(t))return le(t);var e=ne(t),r=[];for(var n in t)("constructor"!=n||!e&&ve.call(t,n))&&r.push(n);return r};var ye=function(t){return ce(t)?ee(t,!0):pe(t)};var he=function(t,e){return t&&Mt(e,ye(e),t)},de=b((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?j.Buffer:void 0,i=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=i?i(r):new t.constructor(r);return t.copy(n),n}}));var be=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e};var ge=function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var u=t[r];e(u,r,t)&&(i[o++]=u)}return i};var _e=function(){return[]},je=Object.prototype.propertyIsEnumerable,we=Object.getOwnPropertySymbols,me=we?function(t){return null==t?[]:(t=Object(t),ge(we(t),(function(e){return je.call(t,e)})))}:_e;var Ae=function(t,e){return Mt(t,me(t),e)};var Oe=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t},xe=oe(Object.getPrototypeOf,Object),Se=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Oe(e,me(t)),t=xe(t);return e}:_e;var Be=function(t,e){return Mt(t,Se(t),e)};var Ue=function(t,e,r){var n=e(t);return Qt(t)?n:Oe(n,r(t))};var ke=function(t){return Ue(t,fe,me)};var Ie=function(t){return Ue(t,ye,Se)},Me=Z(j,"DataView"),Pe=Z(j,"Promise"),ze=Z(j,"Set"),Ce=Z(j,"WeakMap"),Te=R(Me),Ee=R(tt),De=R(Pe),Fe=R(ze),Le=R(Ce),Qe=P;(Me&&"[object DataView]"!=Qe(new Me(new ArrayBuffer(1)))||tt&&"[object Map]"!=Qe(new tt)||Pe&&"[object Promise]"!=Qe(Pe.resolve())||ze&&"[object Set]"!=Qe(new ze)||Ce&&"[object WeakMap]"!=Qe(new Ce))&&(Qe=function(t){var e=P(t),r="[object Object]"==e?t.constructor:void 0,n=r?R(r):"";if(n)switch(n){case Te:return"[object DataView]";case Ee:return"[object Map]";case De:return"[object Promise]";case Fe:return"[object Set]";case Le:return"[object WeakMap]"}return e});var Ne=Qe,We=Object.prototype.hasOwnProperty;var $e=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&We.call(t,"index")&&(r.index=t.index,r.input=t.input),r},Re=j.Uint8Array;var He=function(t){var e=new t.constructor(t.byteLength);return new Re(e).set(new Re(t)),e};var Ve=function(t,e){var r=e?He(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)},qe=/\w*$/;var Ge=function(t){var e=new t.constructor(t.source,qe.exec(t));return e.lastIndex=t.lastIndex,e},Je=w?w.prototype:void 0,Ke=Je?Je.valueOf:void 0;var Xe=function(t){return Ke?Object(Ke.call(t)):{}};var Ye=function(t,e){var r=e?He(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)},Ze="[object Boolean]",tr="[object Date]",er="[object Map]",rr="[object Number]",nr="[object RegExp]",or="[object Set]",ir="[object String]",ur="[object Symbol]",ar="[object ArrayBuffer]",cr="[object DataView]",fr="[object Float32Array]",sr="[object Float64Array]",lr="[object Int8Array]",vr="[object Int16Array]",pr="[object Int32Array]",yr="[object Uint8Array]",hr="[object Uint8ClampedArray]",dr="[object Uint16Array]",br="[object Uint32Array]";var gr=function(t,e,r){var n=t.constructor;switch(e){case ar:return He(t);case Ze:case tr:return new n(+t);case cr:return Ve(t,r);case fr:case sr:case lr:case vr:case pr:case yr:case hr:case dr:case br:return Ye(t,r);case er:return new n;case rr:case ir:return new n(t);case nr:return Ge(t);case or:return new n;case ur:return Xe(t)}},_r=Object.create,jr=function(){function t(){}return function(e){if(!z(e))return{};if(_r)return _r(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();var wr=function(t){return"function"!=typeof t.constructor||ne(t)?{}:jr(xe(t))},mr="[object Map]";var Ar=function(t){return zt(t)&&Ne(t)==mr},Or=Xt&&Xt.isMap,xr=Or?Kt(Or):Ar,Sr="[object Set]";var Br=function(t){return zt(t)&&Ne(t)==Sr},Ur=Xt&&Xt.isSet,kr=Ur?Kt(Ur):Br,Ir=1,Mr=2,Pr=4,zr="[object Arguments]",Cr="[object Function]",Tr="[object GeneratorFunction]",Er="[object Object]",Dr={};Dr[zr]=Dr["[object Array]"]=Dr["[object ArrayBuffer]"]=Dr["[object DataView]"]=Dr["[object Boolean]"]=Dr["[object Date]"]=Dr["[object Float32Array]"]=Dr["[object Float64Array]"]=Dr["[object Int8Array]"]=Dr["[object Int16Array]"]=Dr["[object Int32Array]"]=Dr["[object Map]"]=Dr["[object Number]"]=Dr[Er]=Dr["[object RegExp]"]=Dr["[object Set]"]=Dr["[object String]"]=Dr["[object Symbol]"]=Dr["[object Uint8Array]"]=Dr["[object Uint8ClampedArray]"]=Dr["[object Uint16Array]"]=Dr["[object Uint32Array]"]=!0,Dr["[object Error]"]=Dr[Cr]=Dr["[object WeakMap]"]=!1;var Fr=function t(e,r,n,o,i,u){var a,c=r&Ir,f=r&Mr,s=r&Pr;if(n&&(a=i?n(e,o,i,u):n(e)),void 0!==a)return a;if(!z(e))return e;var l=Qt(e);if(l){if(a=$e(e),!c)return be(e,a)}else{var v=Ne(e),p=v==Cr||v==Tr;if(Wt(e))return de(e,c);if(v==Er||v==zr||p&&!i){if(a=f||p?{}:wr(e),!c)return f?Be(e,he(a,e)):Ae(e,se(a,e))}else{if(!Dr[v])return i?e:{};a=gr(e,v,c)}}u||(u=new xt);var y=u.get(e);if(y)return y;u.set(e,a),kr(e)?e.forEach((function(o){a.add(t(o,r,n,o,e,u))})):xr(e)&&e.forEach((function(o,i){a.set(i,t(o,r,n,i,e,u))}));var h=s?f?Ie:ke:f?keysIn:fe,d=l?void 0:h(e);return St(d||e,(function(o,i){d&&(o=e[i=o]),It(a,i,t(o,r,n,i,e,u))})),a},Lr=1,Qr=4;var Nr=function(t){return Fr(t,Lr|Qr)},Wr="[object Symbol]";var $r=function(t){return"symbol"==h(t)||zt(t)&&P(t)==Wr},Rr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Hr=/^\w*$/;var Vr=function(t,e){if(Qt(t))return!1;var r=h(t);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!$r(t))||(Hr.test(t)||!Rr.test(t)||null!=e&&t in Object(e))},qr="Expected a function";function Gr(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(qr);var r=function r(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var u=t.apply(this,n);return r.cache=i.set(o,u)||i,u};return r.cache=new(Gr.Cache||wt),r}Gr.Cache=wt;var Jr=Gr,Kr=500;var Xr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Yr=/\\(\\)?/g,Zr=function(t){var e=Jr(t,(function(t){return r.size===Kr&&r.clear(),t})),r=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Xr,(function(t,r,n,o){e.push(n?o.replace(Yr,"$1"):r||t)})),e}));var tn=function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o},en=1/0,rn=w?w.prototype:void 0,nn=rn?rn.toString:void 0;var on=function t(e){if("string"==typeof e)return e;if(Qt(e))return tn(e,t)+"";if($r(e))return nn?nn.call(e):"";var r=e+"";return"0"==r&&1/e==-en?"-0":r};var un=function(t){return null==t?"":on(t)};var an=function(t,e){return Qt(t)?t:Vr(t,e)?[t]:Zr(un(t))},cn=1/0;var fn=function(t){if("string"==typeof t||$r(t))return t;var e=t+"";return"0"==e&&1/t==-cn?"-0":e};var sn=function(t,e){for(var r=0,n=(e=an(e,t)).length;null!=t&&r<n;)t=t[fn(e[r++])];return r&&r==n?t:void 0};var ln=function(t,e,r){var n=null==t?void 0:sn(t,e);return void 0===n?r:n},vn=b((function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}function o(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function i(t,e,n,i,u){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new o(n,i||t,u),c=r?r+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var t,n,o=[];if(0===this._eventsCount)return o;for(n in t=this._events)e.call(t,n)&&o.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},a.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,u=new Array(i);o<i;o++)u[o]=n[o].fn;return u},a.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},a.prototype.emit=function(t,e,n,o,i,u){var a=r?r+t:t;if(!this._events[a])return!1;var c,f,s=this._events[a],l=arguments.length;if(s.fn){switch(s.once&&this.removeListener(t,s.fn,void 0,!0),l){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,e),!0;case 3:return s.fn.call(s.context,e,n),!0;case 4:return s.fn.call(s.context,e,n,o),!0;case 5:return s.fn.call(s.context,e,n,o,i),!0;case 6:return s.fn.call(s.context,e,n,o,i,u),!0}for(f=1,c=new Array(l-1);f<l;f++)c[f-1]=arguments[f];s.fn.apply(s.context,c)}else{var v,p=s.length;for(f=0;f<p;f++)switch(s[f].once&&this.removeListener(t,s[f].fn,void 0,!0),l){case 1:s[f].fn.call(s[f].context);break;case 2:s[f].fn.call(s[f].context,e);break;case 3:s[f].fn.call(s[f].context,e,n);break;case 4:s[f].fn.call(s[f].context,e,n,o);break;default:if(!c)for(v=1,c=new Array(l-1);v<l;v++)c[v-1]=arguments[v];s[f].fn.apply(s[f].context,c)}}return!0},a.prototype.on=function(t,e,r){return i(this,t,e,r,!1)},a.prototype.once=function(t,e,r){return i(this,t,e,r,!0)},a.prototype.removeListener=function(t,e,n,o){var i=r?r+t:t;if(!this._events[i])return this;if(!e)return u(this,i),this;var a=this._events[i];if(a.fn)a.fn!==e||o&&!a.once||n&&a.context!==n||u(this,i);else{for(var c=0,f=[],s=a.length;c<s;c++)(a[c].fn!==e||o&&!a[c].once||n&&a[c].context!==n)&&f.push(a[c]);f.length?this._events[i]=1===f.length?f[0]:f:u(this,i)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&u(this,e)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a}));function pn(){return new vn}var yn=NaN,hn=/^\s+|\s+$/g,dn=/^[-+]0x[0-9a-f]+$/i,bn=/^0b[01]+$/i,gn=/^0o[0-7]+$/i,_n=parseInt;var jn=function(t){if("number"==typeof t)return t;if($r(t))return yn;if(z(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=z(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(hn,"");var r=bn.test(t);return r||gn.test(t)?_n(t.slice(2),r?2:8):dn.test(t)?yn:+t},wn=1/0,mn=17976931348623157e292;var An=function(t){return t?(t=jn(t))===wn||t===-wn?(t<0?-1:1)*mn:t==t?t:0:0===t?t:0};var On=function(t){var e=An(t),r=e%1;return e==e?r?e-r:e:0};var xn=function(t){return"number"==typeof t&&t==On(t)};function Sn(t){return"[object String]"===Object.prototype.toString.call(t)}function Bn(t){return!(!Sn(t)||""===t)}function Un(t){var e=!1;return Bn(t)?e=!isNaN(Number(t)):function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)&&(e=!0),e}function kn(t){return Un(t)?An(t):0}var In=j.isFinite,Mn=Math.min;var Pn=function(t){var e=Math[t];return function(t,r){if(t=jn(t),(r=null==r?0:Mn(On(r),292))&&In(t)){var n=(un(t)+"e").split("e"),o=e(n[0]+"e"+(+n[1]+r));return+((n=(un(o)+"e").split("e"))[0]+"e"+(+n[1]-r))}return e(t)}}("round");function zn(t){if(!Un(t))return 0;t=kn(t);var e=Pn(t);return"0"===String(e)?0:e}function Cn(t){return!!function(t){return!!Un(t)&&(t=kn(t),xn(t))}(t)&&zn(t)>0}function Tn(t){var e=Object.prototype.toString.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e}function En(e){var r=null;e.url||(e.url="ws://localhost:8080"),e.token||(e.token="*");var n,o=function(){var t="undefined"!=typeof window&&void 0!==window.document,e="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope;return{isBrowser:t=t||e,isWebWorker:e,isNode:"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node}}().isBrowser;n=o?("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:null).WebSocket:t;try{r=new n(e.url+"/?token="+e.token)}catch(t){r=null}if(null===r)return{error:"can not new MixWS"};function i(){Tn(e.open)&&e.open()}function u(){Tn(e.close)&&e.close()}function a(t){Tn(e.message)&&e.message(t)}function c(t){Tn(e.error)&&e.error(t),r.close()}return o?(r.onopen=i,r.onmessage=function(t){a(t.data)},r.onclose=u,r.onerror=c):(r.on("open",i),r.on("message",a),r.on("close",u),r.on("error",c)),r}function Dn(){var t,e,r=new Promise((function(){t=arguments[0],e=arguments[1]}));return r.resolve=t,r.reject=e,r}function Fn(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=[],o=r.length;if(Cn(e))for(t=0;t<e;t++)n[t]=r[0|Math.random()*o];else{if("rfc4122"!==e)return"";var i;for(n[8]=n[13]=n[18]=n[23]="-",n[14]="4",t=0;t<36;t++)n[t]||(i=0|16*Math.random(),n[t]=r[19===t?3&i|8:i])}return n.join("")}var Ln=function(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=t[n+e];return i};var Qn=function(t,e,n){if(!z(n))return!1;var o=h(e);return!!("number"==o?ce(n)&&Ht(e,n.length):"string"==o&&e in n)&&r(n[e],t)},Nn=Math.ceil,Wn=Math.max;var $n=function(t,e,r){e=(r?Qn(t,e,r):void 0===e)?1:Wn(On(e),0);var n=null==t?0:t.length;if(!n||e<1)return[];for(var o=0,i=0,u=Array(Nn(n/e));o<n;)u[i++]=Ln(t,o,o+=e);return u},Rn=Array.prototype.join;var Hn=function(t,e){return null==t?"":Rn.call(t,e)};var Vn=function(t){return function(e,r,n){for(var o=-1,i=Object(e),u=n(e),a=u.length;a--;){var c=u[t?a:++o];if(!1===r(i[c],c,i))break}return e}}();var qn=function(t,e){return function(r,n){if(null==r)return r;if(!ce(r))return t(r,n);for(var o=r.length,i=e?o:-1,u=Object(r);(e?i--:++i<o)&&!1!==n(u[i],i,u););return r}}((function(t,e){return t&&Vn(t,e,fe)}));var Gn=function(t){return t};var Jn=function(t){return"function"==typeof t?t:Gn};var Kn=function(t,e){return(Qt(t)?St:qn)(t,Jn(e))};function Xn(t){return"[object Uint8Array]"===Object.prototype.toString.call(t)}function Yn(t){return"[object Uint16Array]"===Object.prototype.toString.call(t)}function Zn(t,e){return Bn(t)&&Cn(e)?t.substr(0,e):""}function to(t,e){return Bn(t)&&Cn(e)?function(t,e){if(!Bn(t))return"";if(!Cn(e))return"";var r=t.length-e;return r<0&&(r=0),t.substr(r,e)}(t,t.length-e):""}var eo=b((function(t,e){var r;t.exports=(r=r||function(t,e){var r=Object.create||function(){function t(){}return function(e){var r;return t.prototype=e,r=new t,t.prototype=null,r}}(),n={},o=n.lib={},i=o.Base={extend:function(t){var e=r(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},u=o.WordArray=i.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||c).stringify(this)},concat:function(t){var e=this.words,r=t.words,n=this.sigBytes,o=t.sigBytes;if(this.clamp(),n%4)for(var i=0;i<o;i++){var u=r[i>>>2]>>>24-i%4*8&255;e[n+i>>>2]|=u<<24-(n+i)%4*8}else for(i=0;i<o;i+=4)e[n+i>>>2]=r[i>>>2];return this.sigBytes+=o,this},clamp:function(){var e=this.words,r=this.sigBytes;e[r>>>2]&=4294967295<<32-r%4*8,e.length=t.ceil(r/4)},clone:function(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var r,n=[],o=function(e){e=e;var r=987654321,n=4294967295;return function(){var o=((r=36969*(65535&r)+(r>>16)&n)<<16)+(e=18e3*(65535&e)+(e>>16)&n)&n;return o/=4294967296,(o+=.5)*(t.random()>.5?1:-1)}},i=0;i<e;i+=4){var a=o(4294967296*(r||t.random()));r=987654071*a(),n.push(4294967296*a()|0)}return new u.init(n,e)}}),a=n.enc={},c=a.Hex={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],o=0;o<r;o++){var i=e[o>>>2]>>>24-o%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new u.init(r,e/2)}},f=a.Latin1={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],o=0;o<r;o++){var i=e[o>>>2]>>>24-o%4*8&255;n.push(String.fromCharCode(i))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new u.init(r,e)}},s=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(f.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return f.parse(unescape(encodeURIComponent(t)))}},l=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=s.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var r=this._data,n=r.words,o=r.sigBytes,i=this.blockSize,a=o/(4*i),c=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*i,f=t.min(4*c,o);if(c){for(var s=0;s<c;s+=i)this._doProcessBlock(n,s);var l=n.splice(0,c);r.sigBytes-=f}return new u.init(l,f)},clone:function(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),v=(o.Hasher=l.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,r){return new t.init(r).finalize(e)}},_createHmacHelper:function(t){return function(e,r){return new v.HMAC.init(t,r).finalize(e)}}}),n.algo={});return n}(Math),r)})),ro=b((function(t,e){var r,n,o;t.exports=(n=(r=o=eo).lib.WordArray,r.enc.Base64={stringify:function(t){var e=t.words,r=t.sigBytes,n=this._map;t.clamp();for(var o=[],i=0;i<r;i+=3)for(var u=(e[i>>>2]>>>24-i%4*8&255)<<16|(e[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|e[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;a<4&&i+.75*a<r;a++)o.push(n.charAt(u>>>6*(3-a)&63));var c=n.charAt(64);if(c)for(;o.length%4;)o.push(c);return o.join("")},parse:function(t){var e=t.length,r=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var i=0;i<r.length;i++)o[r.charCodeAt(i)]=i}var u=r.charAt(64);if(u){var a=t.indexOf(u);-1!==a&&(e=a)}return function(t,e,r){for(var o=[],i=0,u=0;u<e;u++)if(u%4){var a=r[t.charCodeAt(u-1)]<<u%4*2,c=r[t.charCodeAt(u)]>>>6-u%4*2;o[i>>>2]|=(a|c)<<24-i%4*8,i++}return n.create(o,i)}(t,e,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},o.enc.Base64)})),no=b((function(t,e){var r;t.exports=(r=eo,function(){if("function"==typeof ArrayBuffer){var t=r.lib.WordArray,e=t.init;(t.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var r=t.byteLength,n=[],o=0;o<r;o++)n[o>>>2]|=t[o]<<24-o%4*8;e.call(this,n,r)}else e.apply(this,arguments)}).prototype=t}}(),r.lib.WordArray)}));function oo(t){return Xn(t)?no.create(t).toString(ro):""}function io(t){if(!Sn(t))return new Uint8Array;for(var e=ro.parse(t),r=e.words,n=e.sigBytes,o=new Uint8Array(n),i=0;i<n;i++){var u=r[i>>>2]>>>24-i%4*8&255;o[i]=u}return o}function uo(t){return Yn(t)?oo(function(t){return Yn(t)?new Uint8Array(t):new Uint8Array}(t)):""}function ao(t){return Sn(t)?function(t){return Xn(t)?new Uint16Array(t):new Uint16Array}(io(t)):new Uint16Array}var co="[Uint8Array]::";var fo="[Uint16Array]::";var so={tagU8A:co,u8arr2b64:function(t){return Xn(t)?co+oo(t):t},b642u8arr:function(t){return Sn(t)&&Zn(t,co.length)===co?io(t=to(t,co.length)):t},tagU16A:fo,u16arr2b64:function(t){return Yn(t)?fo+uo(t):t},b642u16arr:function(t){return Sn(t)&&Zn(t,fo.length)===fo?ao(t=to(t,fo.length)):t}};function lo(t){return"[object Array]"===Object.prototype.toString.call(t)}function vo(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Uint8Array";if(e=t,"[object Undefined]"===Object.prototype.toString.call(e))return"";if(Sn(r))r=[r];else if(!lo(r))return"";var n="";try{n=JSON.stringify(t,(function(t,e){return r.indexOf("Uint8Array")>=0&&(e=so.u8arr2b64(e)),r.indexOf("Uint16Array")>=0&&(e=so.u16arr2b64(e)),e}))}catch(t){n=""}return n}var po=function(t,e,r){var n=t.length;return r=void 0===r?n:r,!e&&r>=n?t:Ln(t,e,r)},yo=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var ho=function(t){return yo.test(t)},bo="[object RegExp]";var go=function(t){return zt(t)&&P(t)==bo},_o=Xt&&Xt.isRegExp,jo=_o?Kt(_o):go;var wo=function(t){return t.split("")},mo="[\\ud800-\\udfff]",Ao="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Oo="\\ud83c[\\udffb-\\udfff]",xo="[^\\ud800-\\udfff]",So="(?:\\ud83c[\\udde6-\\uddff]){2}",Bo="[\\ud800-\\udbff][\\udc00-\\udfff]",Uo="(?:"+Ao+"|"+Oo+")"+"?",ko="[\\ufe0e\\ufe0f]?"+Uo+("(?:\\u200d(?:"+[xo,So,Bo].join("|")+")[\\ufe0e\\ufe0f]?"+Uo+")*"),Io="(?:"+[xo+Ao+"?",Ao,So,Bo,mo].join("|")+")",Mo=RegExp(Oo+"(?="+Oo+")|"+Io+ko,"g");var Po=function(t){return t.match(Mo)||[]};var zo=function(t){return ho(t)?Po(t):wo(t)},Co=4294967295;var To=function(t,e,r){return r&&"number"!=typeof r&&Qn(t,e,r)&&(e=r=void 0),(r=void 0===r?Co:r>>>0)?(t=un(t))&&("string"==typeof e||null!=e&&!jo(e))&&!(e=on(e))&&ho(t)?po(zo(t),0,r):t.split(e,r):[]};var Eo=function(t,e,r){var n=null==t?0:t.length;return n?(e=r||void 0===e?1:On(e),Ln(t,e<0?0:e,n)):[]},Do=Math.ceil,Fo=Math.max;var Lo=function(t,e,r,n){for(var o=-1,i=Fo(Do((e-t)/(r||1)),0),u=Array(i);i--;)u[n?i:++o]=t,t+=r;return u};var Qo=function(t){return function(e,r,n){return n&&"number"!=typeof n&&Qn(e,r,n)&&(r=n=void 0),e=An(e),void 0===r?(r=e,e=0):r=An(r),n=void 0===n?e<r?1:-1:An(n),Lo(e,r,n,t)}}();function No(t,e){return r=t,"[object Object]"===Object.prototype.toString.call(r)&&(!!Bn(e)&&e in t);var r}var Wo={};function $o(t,e){var r=To(t,"|"),n=r[0],o=jn(r[1]),i=jn(r[2]),u=Hn(Eo(r,3),"|");if(No(Wo,n)||(Wo[n]={}),Wo[n]["_"+o]=u,o===i-1){var a="";Kn(Qo(i),(function(t){a+=Wo[n]["_"+t]})),delete Wo[n],e(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Uint8Array";if(Sn(e))e=[e];else if(!lo(e))return{};var r={};try{r=JSON.parse(t,(function(t,r){return e.indexOf("Uint8Array")>=0&&(r=so.b642u8arr(r)),e.indexOf("Uint16Array")>=0&&(r=so.b642u16arr(r)),r}))}catch(t){r={}}return r}(a))}}function Ro(t){var e=!1,r=null,n=new pn,o=new pn;function i(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];setTimeout((function(){n.emit.apply(n,[t].concat(r))}),1)}function u(){t.url||(t.url="ws://localhost:8080"),t.token||(t.token="*"),t.strSplitLength||(t.strSplitLength=1e6);var u={url:t.url,token:t.token,open:function(){i("open"),e||(i("openOnce"),e=!0)},close:function(){i("close"),a()},message:function(t){!function(t){$o(t,f)}(t)},error:function(t){c(t)}};try{r=new En(u)}catch(t){return i("error",{msg:"can not create websocket",err:t}),void a()}if(ln(r,"error"))return i("error",{msg:"can not create websocket",err:"can not new MixWS in WWebsocketClient"}),void a();function c(t){i("error",{msg:"websocket error",err:t}),r.close()}function f(t){var e=ln(t,"_mode","");if("execute"===e)if(ln(t,"_id")&&ln(t,"output")){var r=ln(t,"_id"),n=ln(t,"output");o.emit(r,n)}else i("error",{msg:"can not find _id and output in data",err:t});else"broadcast"===e?i("broadcast",ln(t,"data")):"deliver"===e?i("deliver",ln(t,"data")):c({msg:"can not find _mode in data",err:t})}function s(e,n){r.readyState===r.OPEN&&function(t,e,r,n,o){var i=vo(r),u=$n(i,e),a=Fn(),c=u.length;Kn(u,(function(e,r){e=Hn(e,"");var i="".concat(a,"|").concat(r,"|").concat(c,"|").concat(e);t.send(i,(function(t){t&&L(o)&&o(t)})),L(n)&&n((r+1)/c*100)}))}(r,t.strSplitLength,e,n,(function(t){i("error",{msg:"can not send message",err:t})}))}n.removeAllListeners("triggerExecute"),n.on("triggerExecute",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=Fn();s({_mode:"execute",_id:i,func:t,input:e},n),o.on(i,(function(t){r(t),o.removeAllListeners(i)}))})),n.removeAllListeners("triggerBroadcast"),n.on("triggerBroadcast",(function(t,e){s({_mode:"broadcast",data:t},e)})),n.removeAllListeners("triggerDeliver"),n.on("triggerDeliver",(function(t,e){s({_mode:"deliver",data:t},e)}))}function a(){setTimeout((function(){i("reconn"),u()}),1e3)}return n.execute=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},n=Dn();return i("triggerExecute",t,e,(function(t){n.resolve(t)}),r),n},n.broadcast=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};i("triggerBroadcast",t,e)},n.deliver=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};i("triggerDeliver",t,e)},u(),n}return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(t=Nr(t)).url||(t.url="ws://localhost:8080"),t.token||(t.token="*"),t.takeNumLimit||(t.takeNumLimit=0);var e=new Ro(t),r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=0,r=[];Cn(t)||(t=0),t=zn(t);var n=new pn;return n.get=function(){return r.length>0?(e+=1,r.splice(0,1)[0]):null},n.cb=function(){(e-=1)<0&&(e=0),r.length>0&&n.emit("message",r)},n.push=function(o){r.push(o),(t<=0||e<t)&&n.emit("message",r)},n}(t.takeNumLimit);return r.on("message",(function(t){var n=r.get();n&&e.emit("queueChange",ln(n,"topic",null),ln(n,"id",null),ln(n,"input",null),ln(n,"output",null),ln(n,"state",null),(function(){r.cb()}))})),e.on("deliver",(function(t){ln(t,"topic",null)&&r.push(t)})),e.pushQueue=function(t,r){var n={topic:t,input:r,option:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}};return e.execute("pushQueue",n)},e.modifyQueue=function(t,r,n,o,i){var u={topic:t,id:r,input:n,output:o,state:i};return e.execute("modifyQueue",u)},e.subTopic=function(t){var r={topic:t};return e.execute("subTopic",r)},e.unsubTopic=function(t){var r={topic:t};return e.execute("unsubTopic",r)},e.getQueueByTopic=function(t){var r={topic:t};return e.execute("getQueueByTopic",r)},e.getQueueByID=function(t){var r={id:t};return e.execute("getQueueByID",r)},e.getQueueByIDs=function(t){var r={ids:t};return e.execute("getQueueByIDs",r)},e.getQueueByMatches=function(t){var r={find:t};return e.execute("getQueueByMatches",r)},e.delQueueByTopic=function(t){var r={topic:t};return e.execute("delQueueByTopic",r)},e.delQueueByID=function(t){var r={id:t};return e.execute("delQueueByID",r)},e.delQueueByIDs=function(t){var r={ids:t};return e.execute("delQueueByIDs",r)},e.delQueueByMatches=function(t){var r={find:t};return e.execute("delQueueByMatches",r)},e}}));
//# sourceMappingURL=w-runqws-client.umd.js.map
